<div class="main-body">
    <form [formGroup]="entityForm" novalidate (ngSubmit)="Save()">
        <mat-card>
            <mat-card-header>
                <mat-card-title>{{formName}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="15px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="99" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Nome</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Nome" formControlName="nome">
                            @if (entityForm.controls['nome'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }
                        </mat-form-field>
                    </div>


                </div>

                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="16px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="35" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Email</label>
                        <mat-form-field appearance="outline">
                            <input type="email" matInput placeholder="Email" formControlName="email">

                            @if (entityForm.controls['email'].hasError('email')) {
                            <mat-error><strong>Email inválido</strong></mat-error>
                            }

                        </mat-form-field>
                    </div>

                    <div class="col" fxFlex="32" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Telefone</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Telefone" formControlName="telefone" maxlength="50">
                        </mat-form-field>
                    </div>

                    <div class="col" fxFlex="29" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Tipo de Pessoa</label>
                        <mat-form-field appearance="outline">
                            <mat-select formControlName="tipoPessoa" #tp (selectionChange)="onChange(tp.value)">
                                @for (tipo of tipos; track tipo) {
                                <mat-option [value]="tipo.value">{{ tipo.description }}</mat-option>
                                }
                            </mat-select>

                            @if (entityForm.controls['tipoPessoa'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }

                        </mat-form-field>
                    </div>


                </div>

                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="27px" fxLayoutGap.lg="18px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">



                    @if (isPJ)
                    {
                    <div class="col" fxFlex="35" fxFlex.sm="100" fxFlex.xs="100">
                        <label>CNPJ</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="CNPJ" formControlName="cnpj" maxlength="18"
                                mask="00.000.000/0000-00">
                        </mat-form-field>
                    </div>
                    } @else
                    {
                    <div class="col" fxFlex="35" fxFlex.sm="100" fxFlex.xs="100">
                        <label>CPF</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="CPF" formControlName="cpf" maxlength="14"
                                mask="000.000.000-00">
                        </mat-form-field>
                    </div>
                    }


                    <div class="col" fxFlex="62" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Contato</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Contato" formControlName="contato" maxlength="50">
                        </mat-form-field>
                    </div>



                </div>

                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="15px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="15" fxFlex.sm="100" fxFlex.xs="100">
                        <label>CEP</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="CEP" formControlName="cep" maxlength="9" mask="00000-000">
                        </mat-form-field>
                    </div>


                    <div class="col" fxFlex="71" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Logradouro</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Logradouro" formControlName="logradouro">
                        </mat-form-field>
                    </div>

                    <div class="col" fxFlex="10" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Número</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Número" formControlName="numero">
                        </mat-form-field>
                    </div>

                </div>

                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="21px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="30" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Bairro</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Bairro" formControlName="bairro">
                        </mat-form-field>
                    </div>

                    <div class="col" fxFlex="40" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Complemento</label>
                        <mat-form-field appearance="outline">
                            <input matInput placeholder="Complemento" formControlName="complemento">
                        </mat-form-field>
                    </div>

                    <div class="col" fxFlex="26" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Cidade</label>
                        <mat-form-field appearance="outline">
                            <mat-select formControlName="cidadeId">
                                @for (city of cities; track city) {
                                <mat-option [value]="city.id">{{ city.nome }}</mat-option>
                                }
                            </mat-select>

                            @if (entityForm.controls['cidadeId'].hasError('required')) {
                            <mat-error><strong>{{requiredMessage}}</strong></mat-error>
                            }

                        </mat-form-field>
                    </div>
                </div>

                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="15px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="99" fxFlex.sm="100" fxFlex.xs="100">

                        <label>Observação</label>
                        <mat-form-field appearance="outline">
                            <textarea matInput formControlName="obs" placeholder="Observação"></textarea>
                        </mat-form-field>


                    </div>

                </div>




                <div class="row" fxLayout="row wrap" fxLayout.lg="row wrap" fxLayout.md="row wrap" fxLayout.xs="column"
                    fxLayoutGap="20px" fxLayoutGap.lg="15px" fxLayoutGap.md="10px" fxLayoutGap.sm="0px"
                    fxLayoutGap.xs="0px">

                    <div class="col" fxFlex="10" fxFlex.sm="100" fxFlex.xs="100">
                        <label>Situação</label>

                        <mat-form-field appearance="outline">
                            <mat-select value=1 formControlName="ativo">

                                @for (situation of situations; track situation) {
                                <mat-option [value]="situation.value">{{ situation.description }}</mat-option>
                                }

                            </mat-select>
                        </mat-form-field>


                    </div>

                </div>

            </mat-card-content>
            <mat-card-actions>
                <button routerLink="{{listPage}}" mat-raised-button type="button">Cancelar</button>
                <button mat-raised-button color="primary" type="submit">Salvar</button>
            </mat-card-actions>
        </mat-card>
    </form>
</div>